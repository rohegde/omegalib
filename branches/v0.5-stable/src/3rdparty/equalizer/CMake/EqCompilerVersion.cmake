# Copyright (c) 2011 Stefan Eilemann <eile@eyescale.ch>

FUNCTION(EQ_COMPILER_DUMPVERSION OUTPUT_VERSION)
  EXEC_PROGRAM(${CMAKE_CXX_COMPILER}
    ARGS ${CMAKE_CXX_COMPILER_ARG1} -dumpversion
    OUTPUT_VARIABLE EQ_COMPILER_VERSION
  )
  STRING(REGEX REPLACE "([0-9])\\.([0-9])(\\.[0-9])?" "\\1\\2"
    EQ_COMPILER_VERSION ${EQ_COMPILER_VERSION})

  SET(${OUTPUT_VERSION} ${EQ_COMPILER_VERSION} PARENT_SCOPE)
ENDFUNCTION()
